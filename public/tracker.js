"use strict";var Reev=(()=>{var Pe=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var ut=(e,t,r)=>new Promise((n,o)=>{var i=s=>{try{a(r.next(s))}catch(l){o(l)}},c=s=>{try{a(r.throw(s))}catch(l){o(l)}},a=s=>s.done?n(s.value):Promise.resolve(s.value).then(i,c);a((r=r.apply(e,t)).next())});var F;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(F||(F={}));function Jt(e){return e.nodeType===e.ELEMENT_NODE}function ue(e){var t=e==null?void 0:e.host;return(t==null?void 0:t.shadowRoot)===e}function ce(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function Qt(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function Ye(e){try{var t=e.rules||e.cssRules;return t?Qt(Array.from(t).map(Je).join("")):null}catch(r){return null}}function Je(e){var t=e.cssText;if(jt(e))try{t=Ye(e.styleSheet)||t}catch(r){}return t}function jt(e){return"styleSheet"in e}var pt=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(t){var r;if(!t)return-1;var n=(r=this.getMeta(t))===null||r===void 0?void 0:r.id;return n!=null?n:-1},e.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},e.prototype.removeNodeFromMap=function(t){var r=this,n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(function(o){return r.removeNodeFromMap(o)})},e.prototype.has=function(t){return this.idNodeMap.has(t)},e.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},e.prototype.add=function(t,r){var n=r.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,r)},e.prototype.replace=function(t,r){var n=this.getNode(t);if(n){var o=this.nodeMetaMap.get(n);o&&this.nodeMetaMap.set(r,o)}this.idNodeMap.set(t,r)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function gt(){return new pt}function be(e){var t=e.maskInputOptions,r=e.tagName,n=e.type,o=e.value,i=e.maskInputFn,c=o||"";return(t[r.toLowerCase()]||t[n])&&(i?c=i(c):c="*".repeat(c.length)),c}var ft="__rrweb_original__";function qt(e){var t=e.getContext("2d");if(!t)return!0;for(var r=50,n=0;n<e.width;n+=r)for(var o=0;o<e.height;o+=r){var i=t.getImageData,c=ft in i?i[ft]:i,a=new Uint32Array(c.call(t,n,o,Math.min(r,e.width-n),Math.min(r,e.height-o)).data.buffer);if(a.some(function(s){return s!==0}))return!1}return!0}var Xt=1,$t=new RegExp("[^a-z0-9-_:]"),de=-2;function Qe(){return Xt++}function er(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return $t.test(t)?"div":t}function tr(e){return e.cssRules?Array.from(e.cssRules).map(function(t){return t.cssText||""}).join(""):""}function rr(e){var t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var ge,ht,nr=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,or=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,ir=/^(data:)([^,]*),(.*)/i;function Me(e,t){return(e||"").replace(nr,function(r,n,o,i,c,a){var s=o||c||a,l=n||i||"";if(!s)return r;if(!or.test(s)||ir.test(s))return"url(".concat(l).concat(s).concat(l,")");if(s[0]==="/")return"url(".concat(l).concat(rr(t)+s).concat(l,")");var d=t.split("/"),u=s.split("/");d.pop();for(var h=0,p=u;h<p.length;h++){var f=p[h];f!=="."&&(f===".."?d.pop():d.push(f))}return"url(".concat(l).concat(d.join("/")).concat(l,")")})}var ar=/^[^ \t\n\r\u000c]+/,sr=/^[, \t\n\r\u000c]+/;function lr(e,t){if(t.trim()==="")return t;var r=0;function n(l){var d,u=l.exec(t.substring(r));return u?(d=u[0],r+=d.length,d):""}for(var o=[];n(sr),!(r>=t.length);){var i=n(ar);if(i.slice(-1)===",")i=me(e,i.substring(0,i.length-1)),o.push(i);else{var c="";i=me(e,i);for(var a=!1;;){var s=t.charAt(r);if(s===""){o.push((i+c).trim());break}else if(a)s===")"&&(a=!1);else if(s===","){r+=1,o.push((i+c).trim());break}else s==="("&&(a=!0);c+=s,r+=1}}}return o.join(", ")}function me(e,t){if(!t||t.trim()==="")return t;var r=e.createElement("a");return r.href=t,r.href}function cr(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function je(){var e=document.createElement("a");return e.href="",e.href}function qe(e,t,r,n){return r==="src"||r==="href"&&n&&!(t==="use"&&n[0]==="#")||r==="xlink:href"&&n&&n[0]!=="#"||r==="background"&&n&&(t==="table"||t==="td"||t==="th")?me(e,n):r==="srcset"&&n?lr(e,n):r==="style"&&n?Me(n,je()):t==="object"&&r==="data"&&n?me(e,n):n}function dr(e,t,r){if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return r?e.matches(r):!1}function Se(e,t,r){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return r?Se(e.parentNode,t,r):!1;for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return r?Se(e.parentNode,t,r):!1}function Xe(e,t,r){var n=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(n===null)return!1;if(typeof t=="string"){if(n.classList.contains(t)||n.closest(".".concat(t)))return!0}else if(Se(n,t,!0))return!0;return!!(r&&(n.matches(r)||n.closest(r)))}function ur(e,t,r){var n=e.contentWindow;if(n){var o=!1,i;try{i=n.document.readyState}catch(s){return}if(i!=="complete"){var c=setTimeout(function(){o||(t(),o=!0)},r);e.addEventListener("load",function(){clearTimeout(c),o=!0,t()});return}var a="about:blank";if(n.location.href!==a||e.src===a||e.src==="")return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}}function fr(e,t,r){var n=!1,o;try{o=e.sheet}catch(c){return}if(!o){var i=setTimeout(function(){n||(t(),n=!0)},r);e.addEventListener("load",function(){clearTimeout(i),n=!0,t()})}}function hr(e,t){var r=t.doc,n=t.mirror,o=t.blockClass,i=t.blockSelector,c=t.maskTextClass,a=t.maskTextSelector,s=t.inlineStylesheet,l=t.maskInputOptions,d=l===void 0?{}:l,u=t.maskTextFn,h=t.maskInputFn,p=t.dataURLOptions,f=p===void 0?{}:p,I=t.inlineImages,S=t.recordCanvas,v=t.keepIframeSrcFn,g=t.newlyAddedElement,m=g===void 0?!1:g,k=pr(r,n);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:F.Document,childNodes:[],compatMode:e.compatMode}:{type:F.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:F.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:k};case e.ELEMENT_NODE:return mr(e,{doc:r,blockClass:o,blockSelector:i,inlineStylesheet:s,maskInputOptions:d,maskInputFn:h,dataURLOptions:f,inlineImages:I,recordCanvas:S,keepIframeSrcFn:v,newlyAddedElement:m,rootId:k});case e.TEXT_NODE:return gr(e,{maskTextClass:c,maskTextSelector:a,maskTextFn:u,rootId:k});case e.CDATA_SECTION_NODE:return{type:F.CDATA,textContent:"",rootId:k};case e.COMMENT_NODE:return{type:F.Comment,textContent:e.textContent||"",rootId:k};default:return!1}}function pr(e,t){if(t.hasNode(e)){var r=t.getId(e);return r===1?void 0:r}}function gr(e,t){var r,n=t.maskTextClass,o=t.maskTextSelector,i=t.maskTextFn,c=t.rootId,a=e.parentNode&&e.parentNode.tagName,s=e.textContent,l=a==="STYLE"?!0:void 0,d=a==="SCRIPT"?!0:void 0;if(l&&s){try{e.nextSibling||e.previousSibling||!((r=e.parentNode.sheet)===null||r===void 0)&&r.cssRules&&(s=tr(e.parentNode.sheet))}catch(u){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(u),e)}s=Me(s,je())}return d&&(s="SCRIPT_PLACEHOLDER"),!l&&!d&&s&&Xe(e,n,o)&&(s=i?i(s):s.replace(/[\S]/g,"*")),{type:F.Text,textContent:s||"",isStyle:l,rootId:c}}function mr(e,t){for(var r=t.doc,n=t.blockClass,o=t.blockSelector,i=t.inlineStylesheet,c=t.maskInputOptions,a=c===void 0?{}:c,s=t.maskInputFn,l=t.dataURLOptions,d=l===void 0?{}:l,u=t.inlineImages,h=t.recordCanvas,p=t.keepIframeSrcFn,f=t.newlyAddedElement,I=f===void 0?!1:f,S=t.rootId,v=dr(e,n,o),g=er(e),m={},k=e.attributes.length,B=0;B<k;B++){var L=e.attributes[B];m[L.name]=qe(r,g,L.name,L.value)}if(g==="link"&&i){var D=Array.from(r.styleSheets).find(function(P){return P.href===e.href}),w=null;D&&(w=Ye(D)),w&&(delete m.rel,delete m.href,m._cssText=Me(w,D.href))}if(g==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){var w=Ye(e.sheet);w&&(m._cssText=Me(w,je()))}if(g==="input"||g==="textarea"||g==="select"){var K=e.value,z=e.checked;m.type!=="radio"&&m.type!=="checkbox"&&m.type!=="submit"&&m.type!=="button"&&K?m.value=be({type:m.type,tagName:g,value:K,maskInputOptions:a,maskInputFn:s}):z&&(m.checked=z)}if(g==="option"&&(e.selected&&!a.select?m.selected=!0:delete m.selected),g==="canvas"&&h){if(e.__context==="2d")qt(e)||(m.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){var J=e.toDataURL(d.type,d.quality),Q=document.createElement("canvas");Q.width=e.width,Q.height=e.height;var j=Q.toDataURL(d.type,d.quality);J!==j&&(m.rr_dataURL=J)}}if(g==="img"&&u){ge||(ge=r.createElement("canvas"),ht=ge.getContext("2d"));var O=e,H=O.crossOrigin;O.crossOrigin="anonymous";var q=function(){try{ge.width=O.naturalWidth,ge.height=O.naturalHeight,ht.drawImage(O,0,0),m.rr_dataURL=ge.toDataURL(d.type,d.quality)}catch(P){console.warn("Cannot inline img src=".concat(O.currentSrc,"! Error: ").concat(P))}H?m.crossOrigin=H:O.removeAttribute("crossorigin")};O.complete&&O.naturalWidth!==0?q():O.onload=q}if((g==="audio"||g==="video")&&(m.rr_mediaState=e.paused?"paused":"played",m.rr_mediaCurrentTime=e.currentTime),I||(e.scrollLeft&&(m.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(m.rr_scrollTop=e.scrollTop)),v){var te=e.getBoundingClientRect(),ne=te.width,V=te.height;m={class:m.class,rr_width:"".concat(ne,"px"),rr_height:"".concat(V,"px")}}return g==="iframe"&&!p(m.src)&&(e.contentDocument||(m.rr_src=m.src),delete m.src),{type:F.Element,tagName:g,attributes:m,childNodes:[],isSVG:cr(e)||void 0,needBlock:v,rootId:S}}function M(e){return e===void 0?"":e.toLowerCase()}function Ir(e,t){if(t.comment&&e.type===F.Comment)return!0;if(e.type===F.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&e.attributes.rel==="preload"&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(M(e.attributes.name).match(/^msapplication-tile(image|color)$/)||M(e.attributes.name)==="application-name"||M(e.attributes.rel)==="icon"||M(e.attributes.rel)==="apple-touch-icon"||M(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&M(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(M(e.attributes.property).match(/^(og|twitter|fb):/)||M(e.attributes.name).match(/^(og|twitter):/)||M(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(M(e.attributes.name)==="robots"||M(e.attributes.name)==="googlebot"||M(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(M(e.attributes.name)==="author"||M(e.attributes.name)==="generator"||M(e.attributes.name)==="framework"||M(e.attributes.name)==="publisher"||M(e.attributes.name)==="progid"||M(e.attributes.property).match(/^article:/)||M(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(M(e.attributes.name)==="google-site-verification"||M(e.attributes.name)==="yandex-verification"||M(e.attributes.name)==="csrf-token"||M(e.attributes.name)==="p:domain_verify"||M(e.attributes.name)==="verify-v1"||M(e.attributes.name)==="verification"||M(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function le(e,t){var r=t.doc,n=t.mirror,o=t.blockClass,i=t.blockSelector,c=t.maskTextClass,a=t.maskTextSelector,s=t.skipChild,l=s===void 0?!1:s,d=t.inlineStylesheet,u=d===void 0?!0:d,h=t.maskInputOptions,p=h===void 0?{}:h,f=t.maskTextFn,I=t.maskInputFn,S=t.slimDOMOptions,v=t.dataURLOptions,g=v===void 0?{}:v,m=t.inlineImages,k=m===void 0?!1:m,B=t.recordCanvas,L=B===void 0?!1:B,D=t.onSerialize,w=t.onIframeLoad,K=t.iframeLoadTimeout,z=K===void 0?5e3:K,J=t.onStylesheetLoad,Q=t.stylesheetLoadTimeout,j=Q===void 0?5e3:Q,O=t.keepIframeSrcFn,H=O===void 0?function(){return!1}:O,q=t.newlyAddedElement,te=q===void 0?!1:q,ne=t.preserveWhiteSpace,V=ne===void 0?!0:ne,P=hr(e,{doc:r,mirror:n,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:a,inlineStylesheet:u,maskInputOptions:p,maskTextFn:f,maskInputFn:I,dataURLOptions:g,inlineImages:k,recordCanvas:L,keepIframeSrcFn:H,newlyAddedElement:te});if(!P)return console.warn(e,"not serialized"),null;var ie;n.hasNode(e)?ie=n.getId(e):Ir(P,S)||!V&&P.type===F.Text&&!P.isStyle&&!P.textContent.replace(/^\s+|\s+$/gm,"").length?ie=de:ie=Qe();var N=Object.assign(P,{id:ie});if(n.add(e,N),ie===de)return null;D&&D(e);var X=!l;if(N.type===F.Element){X=X&&!N.needBlock,delete N.needBlock;var re=e.shadowRoot;re&&ce(re)&&(N.isShadowHost=!0)}if((N.type===F.Document||N.type===F.Element)&&X){S.headWhitespace&&N.type===F.Element&&N.tagName==="head"&&(V=!1);for(var pe={doc:r,mirror:n,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:a,skipChild:l,inlineStylesheet:u,maskInputOptions:p,maskTextFn:f,maskInputFn:I,slimDOMOptions:S,dataURLOptions:g,inlineImages:k,recordCanvas:L,preserveWhiteSpace:V,onSerialize:D,onIframeLoad:w,iframeLoadTimeout:z,onStylesheetLoad:J,stylesheetLoadTimeout:j,keepIframeSrcFn:H},C=0,G=Array.from(e.childNodes);C<G.length;C++){var Z=G[C],T=le(Z,pe);T&&N.childNodes.push(T)}if(Jt(e)&&e.shadowRoot)for(var Y=0,A=Array.from(e.shadowRoot.childNodes);Y<A.length;Y++){var Z=A[Y],T=le(Z,pe);T&&(ce(e.shadowRoot)&&(T.isShadow=!0),N.childNodes.push(T))}}return e.parentNode&&ue(e.parentNode)&&ce(e.parentNode)&&(N.isShadow=!0),N.type===F.Element&&N.tagName==="iframe"&&ur(e,function(){var _=e.contentDocument;if(_&&w){var ye=le(_,{doc:_,mirror:n,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:a,skipChild:!1,inlineStylesheet:u,maskInputOptions:p,maskTextFn:f,maskInputFn:I,slimDOMOptions:S,dataURLOptions:g,inlineImages:k,recordCanvas:L,preserveWhiteSpace:V,onSerialize:D,onIframeLoad:w,iframeLoadTimeout:z,onStylesheetLoad:J,stylesheetLoadTimeout:j,keepIframeSrcFn:H});ye&&w(e,ye)}},z),N.type===F.Element&&N.tagName==="link"&&N.attributes.rel==="stylesheet"&&fr(e,function(){if(J){var _=le(e,{doc:r,mirror:n,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:a,skipChild:!1,inlineStylesheet:u,maskInputOptions:p,maskTextFn:f,maskInputFn:I,slimDOMOptions:S,dataURLOptions:g,inlineImages:k,recordCanvas:L,preserveWhiteSpace:V,onSerialize:D,onIframeLoad:w,iframeLoadTimeout:z,onStylesheetLoad:J,stylesheetLoadTimeout:j,keepIframeSrcFn:H});_&&J(e,_)}},j),N}function mt(e,t){var r=t||{},n=r.mirror,o=n===void 0?new pt:n,i=r.blockClass,c=i===void 0?"rr-block":i,a=r.blockSelector,s=a===void 0?null:a,l=r.maskTextClass,d=l===void 0?"rr-mask":l,u=r.maskTextSelector,h=u===void 0?null:u,p=r.inlineStylesheet,f=p===void 0?!0:p,I=r.inlineImages,S=I===void 0?!1:I,v=r.recordCanvas,g=v===void 0?!1:v,m=r.maskAllInputs,k=m===void 0?!1:m,B=r.maskTextFn,L=r.maskInputFn,D=r.slimDOM,w=D===void 0?!1:D,K=r.dataURLOptions,z=r.preserveWhiteSpace,J=r.onSerialize,Q=r.onIframeLoad,j=r.iframeLoadTimeout,O=r.onStylesheetLoad,H=r.stylesheetLoadTimeout,q=r.keepIframeSrcFn,te=q===void 0?function(){return!1}:q,ne=k===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:k===!1?{password:!0}:k,V=w===!0||w==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:w==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:w===!1?{}:w;return le(e,{doc:e,mirror:o,blockClass:c,blockSelector:s,maskTextClass:d,maskTextSelector:h,skipChild:!1,inlineStylesheet:f,maskInputOptions:ne,maskTextFn:B,maskInputFn:L,slimDOMOptions:V,dataURLOptions:K,inlineImages:S,recordCanvas:g,preserveWhiteSpace:z,onSerialize:J,onIframeLoad:Q,iframeLoadTimeout:j,onStylesheetLoad:O,stylesheetLoadTimeout:H,keepIframeSrcFn:te,newlyAddedElement:!1})}var Cr=/([^\\]):hover/,Br=new RegExp(Cr.source,"g");function W(e,t,r=document){let n={capture:!0,passive:!0};return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}var Ie=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,It={map:{},getId(){return console.error(Ie),-1},getNode(){return console.error(Ie),null},removeNodeFromMap(){console.error(Ie)},has(){return console.error(Ie),!1},reset(){console.error(Ie)}};typeof window!="undefined"&&window.Proxy&&window.Reflect&&(It=new Proxy(It,{get(e,t,r){return t==="map"&&console.error(Ie),Reflect.get(e,t,r)}}));function Ce(e,t,r={}){let n=null,o=0;return function(...i){let c=Date.now();!o&&r.leading===!1&&(o=c);let a=t-(c-o),s=this;a<=0||a>t?(n&&(clearTimeout(n),n=null),o=c,e.apply(s,i)):!n&&r.trailing!==!1&&(n=setTimeout(()=>{o=r.leading===!1?0:Date.now(),n=null,e.apply(s,i)},a))}}function fe(e,t,r,n,o=window){let i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,n?r:{set(c){setTimeout(()=>{r.set.call(this,c)},0),i&&i.set&&i.set.call(this,c)}}),()=>fe(e,t,i||{},!0)}function $(e,t,r){try{if(!(t in e))return()=>{};let n=e[t],o=r(n);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=o,()=>{e[t]=n}}catch(n){return()=>{}}}function Re(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function xe(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function R(e,t,r,n){if(!e)return!1;let o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!o)return!1;if(typeof t=="string"){if(o.classList.contains(t)||n&&o.closest("."+t)!==null)return!0}else if(Se(o,t,n))return!0;return!!(r&&(e.matches(r)||n&&o.closest(r)!==null))}function Ct(e,t){return t.getId(e)!==-1}function Ne(e,t){return t.getId(e)===de}function $e(e,t){if(ue(e))return!1;let r=t.getId(e);return t.has(r)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?$e(e.parentNode,t):!0:!0}function et(e){return!!e.changedTouches}function vt(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let r=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===r)return!0;while(r=r&&r.parentNode);return!1})}function Oe(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function Ee(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Fe(e){return!!(e!=null&&e.shadowRoot)}var Te=class{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var r;return(r=this.styleIDMap.get(t))!==null&&r!==void 0?r:-1}has(t){return this.styleIDMap.has(t)}add(t,r){if(this.has(t))return this.getId(t);let n;return r===void 0?n=this.id++:n=r,this.styleIDMap.set(t,n),this.idStyleMap.set(n,t),n}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};var b=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(b||{}),y=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(y||{}),Le=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Le||{}),oe=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(oe||{});function yt(e){return"__ln"in e}var tt=class{constructor(){this.length=0,this.head=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let r=this.head;for(let n=0;n<t;n++)r=(r==null?void 0:r.next)||null;return r}addNode(t){let r={value:t,previous:null,next:null};if(t.__ln=r,t.previousSibling&&yt(t.previousSibling)){let n=t.previousSibling.__ln.next;r.next=n,r.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=r,n&&(n.previous=r)}else if(t.nextSibling&&yt(t.nextSibling)&&t.nextSibling.__ln.previous){let n=t.nextSibling.__ln.previous;r.previous=n,r.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=r,n&&(n.next=r)}else this.head&&(this.head.previous=r),r.next=this.head,this.head=r;this.length++}removeNode(t){let r=t.__ln;this.head&&(r.previous?(r.previous.next=r.next,r.next&&(r.next.previous=r.previous)):(this.head=r.next,this.head&&(this.head.previous=null)),t.__ln&&delete t.__ln,this.length--)}},St=(e,t)=>`${e}@${t}`,De=class{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let t=[],r=new tt,n=a=>{let s=a,l=de;for(;l===de;)s=s&&s.nextSibling,l=s&&this.mirror.getId(s);return l},o=a=>{var s,l,d,u;let h=null;((l=(s=a.getRootNode)===null||s===void 0?void 0:s.call(a))===null||l===void 0?void 0:l.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&a.getRootNode().host&&(h=a.getRootNode().host);let p=h;for(;((u=(d=p==null?void 0:p.getRootNode)===null||d===void 0?void 0:d.call(p))===null||u===void 0?void 0:u.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&p.getRootNode().host;)p=p.getRootNode().host;let f=!this.doc.contains(a)&&(!p||!this.doc.contains(p));if(!a.parentNode||f)return;let I=ue(a.parentNode)?this.mirror.getId(h):this.mirror.getId(a.parentNode),S=n(a);if(I===-1||S===-1)return r.addNode(a);let v=le(a,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:g=>{Oe(g,this.mirror)&&this.iframeManager.addIframe(g),Ee(g,this.mirror)&&this.stylesheetManager.trackLinkElement(g),Fe(a)&&this.shadowDomManager.addShadowRoot(a.shadowRoot,this.doc)},onIframeLoad:(g,m)=>{this.iframeManager.attachIframe(g,m),this.shadowDomManager.observeAttachShadow(g)},onStylesheetLoad:(g,m)=>{this.stylesheetManager.attachLinkElement(g,m)}});v&&t.push({parentId:I,nextId:S,node:v})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let a of Array.from(this.movedSet.values()))bt(this.removes,a,this.mirror)&&!this.movedSet.has(a.parentNode)||o(a);for(let a of Array.from(this.addedSet.values()))!At(this.droppedSet,a)&&!bt(this.removes,a,this.mirror)||At(this.movedSet,a)?o(a):this.droppedSet.add(a);let i=null;for(;r.length;){let a=null;if(i){let s=this.mirror.getId(i.value.parentNode),l=n(i.value);s!==-1&&l!==-1&&(a=i)}if(!a)for(let s=r.length-1;s>=0;s--){let l=r.get(s);if(l){let d=this.mirror.getId(l.value.parentNode);if(n(l.value)===-1)continue;if(d!==-1){a=l;break}else{let h=l.value;if(h.parentNode&&h.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let p=h.parentNode.host;if(this.mirror.getId(p)!==-1){a=l;break}}}}}if(!a){for(;r.head;)r.removeNode(r.head.value);break}i=a.previous,r.removeNode(a.value),o(a.value)}let c={texts:this.texts.map(a=>({id:this.mirror.getId(a.node),value:a.value})).filter(a=>this.mirror.has(a.id)),attributes:this.attributes.map(a=>({id:this.mirror.getId(a.node),attributes:a.attributes})).filter(a=>this.mirror.has(a.id)),removes:this.removes,adds:t};!c.texts.length&&!c.attributes.length&&!c.removes.length&&!c.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(c))},this.processMutation=t=>{if(!Ne(t.target,this.mirror))switch(t.type){case"characterData":{let r=t.target.textContent;!R(t.target,this.blockClass,this.blockSelector,!1)&&r!==t.oldValue&&this.texts.push({value:Xe(t.target,this.maskTextClass,this.maskTextSelector)&&r?this.maskTextFn?this.maskTextFn(r):r.replace(/[\S]/g,"*"):r,node:t.target});break}case"attributes":{let r=t.target,n=t.target.getAttribute(t.attributeName);if(t.attributeName==="value"&&(n=be({maskInputOptions:this.maskInputOptions,tagName:t.target.tagName,type:t.target.getAttribute("type"),value:n,maskInputFn:this.maskInputFn})),R(t.target,this.blockClass,this.blockSelector,!1)||n===t.oldValue)return;let o=this.attributes.find(i=>i.node===t.target);if(r.tagName==="IFRAME"&&t.attributeName==="src"&&!this.keepIframeSrcFn(n))if(!r.contentDocument)t.attributeName="rr_src";else return;if(o||(o={node:t.target,attributes:{}},this.attributes.push(o)),t.attributeName==="style"){let i=this.doc.createElement("span");t.oldValue&&i.setAttribute("style",t.oldValue),(o.attributes.style===void 0||o.attributes.style===null)&&(o.attributes.style={});let c=o.attributes.style;for(let a of Array.from(r.style)){let s=r.style.getPropertyValue(a),l=r.style.getPropertyPriority(a);(s!==i.style.getPropertyValue(a)||l!==i.style.getPropertyPriority(a))&&(l===""?c[a]=s:c[a]=[s,l])}for(let a of Array.from(i.style))r.style.getPropertyValue(a)===""&&(c[a]=!1)}else o.attributes[t.attributeName]=qe(this.doc,r.tagName,t.attributeName,n);break}case"childList":{if(R(t.target,this.blockClass,this.blockSelector,!0))return;t.addedNodes.forEach(r=>this.genAdds(r,t.target)),t.removedNodes.forEach(r=>{let n=this.mirror.getId(r),o=ue(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);R(t.target,this.blockClass,this.blockSelector,!1)||Ne(r,this.mirror)||!Ct(r,this.mirror)||(this.addedSet.has(r)?(rt(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(t.target)&&n===-1||$e(t.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[St(n,o)]?rt(this.movedSet,r):this.removes.push({parentId:o,id:n,isShadow:ue(t.target)&&ce(t.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(t,r)=>{if(this.mirror.hasNode(t)){if(Ne(t,this.mirror))return;this.movedSet.add(t);let n=null;r&&this.mirror.hasNode(r)&&(n=this.mirror.getId(r)),n&&n!==-1&&(this.movedMap[St(this.mirror.getId(t),n)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);R(t,this.blockClass,this.blockSelector,!1)||t.childNodes.forEach(n=>this.genAdds(n))}}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager"].forEach(r=>{this[r]=t[r]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}};function rt(e,t){e.delete(t),t.childNodes.forEach(r=>rt(e,r))}function bt(e,t,r){return e.length===0?!1:kt(e,t,r)}function kt(e,t,r){let{parentNode:n}=t;if(!n)return!1;let o=r.getId(n);return e.some(i=>i.id===o)?!0:kt(e,n,r)}function At(e,t){return e.size===0?!1:wt(e,t)}function wt(e,t){let{parentNode:r}=t;return r?e.has(r)?!0:wt(e,r):!1}var se=[],Rt=typeof CSSGroupingRule!="undefined",xt=typeof CSSMediaRule!="undefined",Nt=typeof CSSSupportsRule!="undefined",Ot=typeof CSSConditionRule!="undefined";function Ae(e){try{if("composedPath"in e){let t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch(t){return e.target}}function nt(e,t){var r,n;let o=new De;se.push(o),o.init(e);let i=window.MutationObserver||window.__rrMutationObserver,c=(n=(r=window==null?void 0:window.Zone)===null||r===void 0?void 0:r.__symbol__)===null||n===void 0?void 0:n.call(r,"MutationObserver");c&&window[c]&&(i=window[c]);let a=new i(o.processMutations.bind(o));return a.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function vr({mousemoveCb:e,sampling:t,doc:r,mirror:n}){if(t.mousemove===!1)return()=>{};let o=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500,c=[],a,s=Ce(u=>{let h=Date.now()-a;e(c.map(p=>(p.timeOffset-=h,p)),u),c=[],a=null},i),l=Ce(u=>{let h=Ae(u),{clientX:p,clientY:f}=et(u)?u.changedTouches[0]:u;a||(a=Date.now()),c.push({x:p,y:f,id:n.getId(h),timeOffset:Date.now()-a}),s(typeof DragEvent!="undefined"&&u instanceof DragEvent?y.Drag:u instanceof MouseEvent?y.MouseMove:y.TouchMove)},o,{trailing:!1}),d=[W("mousemove",l,r),W("touchmove",l,r),W("drag",l,r)];return()=>{d.forEach(u=>u())}}function yr({mouseInteractionCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,sampling:i}){if(i.mouseInteraction===!1)return()=>{};let c=i.mouseInteraction===!0||i.mouseInteraction===void 0?{}:i.mouseInteraction,a=[],s=l=>d=>{let u=Ae(d);if(R(u,n,o,!0))return;let h=et(d)?d.changedTouches[0]:d;if(!h)return;let p=r.getId(u),{clientX:f,clientY:I}=h;e({type:Le[l],id:p,x:f,y:I})};return Object.keys(Le).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&c[l]!==!1).forEach(l=>{let d=l.toLowerCase(),u=s(l);a.push(W(d,u,t))}),()=>{a.forEach(l=>l())}}function ot({scrollCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,sampling:i}){let c=Ce(a=>{let s=Ae(a);if(!s||R(s,n,o,!0))return;let l=r.getId(s);if(s===t){let d=t.scrollingElement||t.documentElement;e({id:l,x:d.scrollLeft,y:d.scrollTop})}else e({id:l,x:s.scrollLeft,y:s.scrollTop})},i.scroll||100);return W("scroll",c,t)}function Sr({viewportResizeCb:e}){let t=-1,r=-1,n=Ce(()=>{let o=Re(),i=xe();(t!==o||r!==i)&&(e({width:Number(i),height:Number(o)}),t=o,r=i)},200);return W("resize",n,window)}function Mt(e,t){let r=Object.assign({},e);return t||delete r.userTriggered,r}var br=["INPUT","TEXTAREA","SELECT"],Tt=new WeakMap;function Ar({inputCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,ignoreClass:i,maskInputOptions:c,maskInputFn:a,sampling:s,userTriggeredOnInput:l}){function d(v){let g=Ae(v),m=v.isTrusted;if(g&&g.tagName==="OPTION"&&(g=g.parentElement),!g||!g.tagName||br.indexOf(g.tagName)<0||R(g,n,o,!0))return;let k=g.type;if(g.classList.contains(i))return;let B=g.value,L=!1;k==="radio"||k==="checkbox"?L=g.checked:(c[g.tagName.toLowerCase()]||c[k])&&(B=be({maskInputOptions:c,tagName:g.tagName,type:k,value:B,maskInputFn:a})),u(g,Mt({text:B,isChecked:L,userTriggered:m},l));let D=g.name;k==="radio"&&D&&L&&t.querySelectorAll(`input[type="radio"][name="${D}"]`).forEach(w=>{w!==g&&u(w,Mt({text:w.value,isChecked:!L,userTriggered:!1},l))})}function u(v,g){let m=Tt.get(v);if(!m||m.text!==g.text||m.isChecked!==g.isChecked){Tt.set(v,g);let k=r.getId(v);e(Object.assign(Object.assign({},g),{id:k}))}}let p=(s.input==="last"?["change"]:["input","change"]).map(v=>W(v,d,t)),f=t.defaultView;if(!f)return()=>{p.forEach(v=>v())};let I=f.Object.getOwnPropertyDescriptor(f.HTMLInputElement.prototype,"value"),S=[[f.HTMLInputElement.prototype,"value"],[f.HTMLInputElement.prototype,"checked"],[f.HTMLSelectElement.prototype,"value"],[f.HTMLTextAreaElement.prototype,"value"],[f.HTMLSelectElement.prototype,"selectedIndex"],[f.HTMLOptionElement.prototype,"selected"]];return I&&I.set&&p.push(...S.map(v=>fe(v[0],v[1],{set(){d({target:this})}},!1,f))),()=>{p.forEach(v=>v())}}function We(e){let t=[];function r(n,o){if(Rt&&n.parentRule instanceof CSSGroupingRule||xt&&n.parentRule instanceof CSSMediaRule||Nt&&n.parentRule instanceof CSSSupportsRule||Ot&&n.parentRule instanceof CSSConditionRule){let c=Array.from(n.parentRule.cssRules).indexOf(n);o.unshift(c)}else if(n.parentStyleSheet){let c=Array.from(n.parentStyleSheet.cssRules).indexOf(n);o.unshift(c)}return o}return r(e,t)}function ae(e,t,r){let n,o;return e?(e.ownerNode?n=t.getId(e.ownerNode):o=r.getId(e),{styleId:o,id:n}):{}}function kr({styleSheetRuleCb:e,mirror:t,stylesheetManager:r},{win:n}){let o=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=function(d,u){let{id:h,styleId:p}=ae(this,t,r.styleMirror);return(h&&h!==-1||p&&p!==-1)&&e({id:h,styleId:p,adds:[{rule:d,index:u}]}),o.apply(this,[d,u])};let i=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=function(d){let{id:u,styleId:h}=ae(this,t,r.styleMirror);return(u&&u!==-1||h&&h!==-1)&&e({id:u,styleId:h,removes:[{index:d}]}),i.apply(this,[d])};let c;n.CSSStyleSheet.prototype.replace&&(c=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=function(d){let{id:u,styleId:h}=ae(this,t,r.styleMirror);return(u&&u!==-1||h&&h!==-1)&&e({id:u,styleId:h,replace:d}),c.apply(this,[d])});let a;n.CSSStyleSheet.prototype.replaceSync&&(a=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=function(d){let{id:u,styleId:h}=ae(this,t,r.styleMirror);return(u&&u!==-1||h&&h!==-1)&&e({id:u,styleId:h,replaceSync:d}),a.apply(this,[d])});let s={};Rt?s.CSSGroupingRule=n.CSSGroupingRule:(xt&&(s.CSSMediaRule=n.CSSMediaRule),Ot&&(s.CSSConditionRule=n.CSSConditionRule),Nt&&(s.CSSSupportsRule=n.CSSSupportsRule));let l={};return Object.entries(s).forEach(([d,u])=>{l[d]={insertRule:u.prototype.insertRule,deleteRule:u.prototype.deleteRule},u.prototype.insertRule=function(h,p){let{id:f,styleId:I}=ae(this.parentStyleSheet,t,r.styleMirror);return(f&&f!==-1||I&&I!==-1)&&e({id:f,styleId:I,adds:[{rule:h,index:[...We(this),p||0]}]}),l[d].insertRule.apply(this,[h,p])},u.prototype.deleteRule=function(h){let{id:p,styleId:f}=ae(this.parentStyleSheet,t,r.styleMirror);return(p&&p!==-1||f&&f!==-1)&&e({id:p,styleId:f,removes:[{index:[...We(this),h]}]}),l[d].deleteRule.apply(this,[h])}}),()=>{n.CSSStyleSheet.prototype.insertRule=o,n.CSSStyleSheet.prototype.deleteRule=i,c&&(n.CSSStyleSheet.prototype.replace=c),a&&(n.CSSStyleSheet.prototype.replaceSync=a),Object.entries(s).forEach(([d,u])=>{u.prototype.insertRule=l[d].insertRule,u.prototype.deleteRule=l[d].deleteRule})}}function it({mirror:e,stylesheetManager:t},r){var n,o,i;let c=null;r.nodeName==="#document"?c=e.getId(r):c=e.getId(r.host);let a=r.nodeName==="#document"?(n=r.defaultView)===null||n===void 0?void 0:n.Document:(i=(o=r.ownerDocument)===null||o===void 0?void 0:o.defaultView)===null||i===void 0?void 0:i.ShadowRoot,s=Object.getOwnPropertyDescriptor(a==null?void 0:a.prototype,"adoptedStyleSheets");return c===null||c===-1||!a||!s?()=>{}:(Object.defineProperty(r,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){var l;return(l=s.get)===null||l===void 0?void 0:l.call(this)},set(l){var d;let u=(d=s.set)===null||d===void 0?void 0:d.call(this,l);if(c!==null&&c!==-1)try{t.adoptStyleSheets(l,c)}catch(h){}return u}}),()=>{Object.defineProperty(r,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})})}function wr({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:r,stylesheetManager:n},{win:o}){let i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=function(a,s,l){var d;if(r.has(a))return i.apply(this,[a,s,l]);let{id:u,styleId:h}=ae((d=this.parentRule)===null||d===void 0?void 0:d.parentStyleSheet,t,n.styleMirror);return(u&&u!==-1||h&&h!==-1)&&e({id:u,styleId:h,set:{property:a,value:s,priority:l},index:We(this.parentRule)}),i.apply(this,[a,s,l])};let c=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=function(a){var s;if(r.has(a))return c.apply(this,[a]);let{id:l,styleId:d}=ae((s=this.parentRule)===null||s===void 0?void 0:s.parentStyleSheet,t,n.styleMirror);return(l&&l!==-1||d&&d!==-1)&&e({id:l,styleId:d,remove:{property:a},index:We(this.parentRule)}),c.apply(this,[a])},()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=c}}function Mr({mediaInteractionCb:e,blockClass:t,blockSelector:r,mirror:n,sampling:o}){let i=a=>Ce(s=>{let l=Ae(s);if(!l||R(l,t,r,!0))return;let{currentTime:d,volume:u,muted:h,playbackRate:p}=l;e({type:a,id:n.getId(l),currentTime:d,volume:u,muted:h,playbackRate:p})},o.media||500),c=[W("play",i(0)),W("pause",i(1)),W("seeked",i(2)),W("volumechange",i(3)),W("ratechange",i(4))];return()=>{c.forEach(a=>a())}}function Tr({fontCb:e,doc:t}){let r=t.defaultView;if(!r)return()=>{};let n=[],o=new WeakMap,i=r.FontFace;r.FontFace=function(s,l,d){let u=new i(s,l,d);return o.set(u,{family:s,buffer:typeof l!="string",descriptors:d,fontSource:typeof l=="string"?l:JSON.stringify(Array.from(new Uint8Array(l)))}),u};let c=$(t.fonts,"add",function(a){return function(s){return setTimeout(()=>{let l=o.get(s);l&&(e(l),o.delete(s))},0),a.apply(this,[s])}});return n.push(()=>{r.FontFace=i}),n.push(c),()=>{n.forEach(a=>a())}}function Rr(e){let{doc:t,mirror:r,blockClass:n,blockSelector:o,selectionCb:i}=e,c=!0,a=()=>{let s=t.getSelection();if(!s||c&&(s!=null&&s.isCollapsed))return;c=s.isCollapsed||!1;let l=[],d=s.rangeCount||0;for(let u=0;u<d;u++){let h=s.getRangeAt(u),{startContainer:p,startOffset:f,endContainer:I,endOffset:S}=h;R(p,n,o,!0)||R(I,n,o,!0)||l.push({start:r.getId(p),startOffset:f,end:r.getId(I),endOffset:S})}i({ranges:l})};return a(),W("selectionchange",a)}function xr(e,t){let{mutationCb:r,mousemoveCb:n,mouseInteractionCb:o,scrollCb:i,viewportResizeCb:c,inputCb:a,mediaInteractionCb:s,styleSheetRuleCb:l,styleDeclarationCb:d,canvasMutationCb:u,fontCb:h,selectionCb:p}=e;e.mutationCb=(...f)=>{t.mutation&&t.mutation(...f),r(...f)},e.mousemoveCb=(...f)=>{t.mousemove&&t.mousemove(...f),n(...f)},e.mouseInteractionCb=(...f)=>{t.mouseInteraction&&t.mouseInteraction(...f),o(...f)},e.scrollCb=(...f)=>{t.scroll&&t.scroll(...f),i(...f)},e.viewportResizeCb=(...f)=>{t.viewportResize&&t.viewportResize(...f),c(...f)},e.inputCb=(...f)=>{t.input&&t.input(...f),a(...f)},e.mediaInteractionCb=(...f)=>{t.mediaInteaction&&t.mediaInteaction(...f),s(...f)},e.styleSheetRuleCb=(...f)=>{t.styleSheetRule&&t.styleSheetRule(...f),l(...f)},e.styleDeclarationCb=(...f)=>{t.styleDeclaration&&t.styleDeclaration(...f),d(...f)},e.canvasMutationCb=(...f)=>{t.canvasMutation&&t.canvasMutation(...f),u(...f)},e.fontCb=(...f)=>{t.font&&t.font(...f),h(...f)},e.selectionCb=(...f)=>{t.selection&&t.selection(...f),p(...f)}}function Et(e,t={}){let r=e.doc.defaultView;if(!r)return()=>{};xr(e,t);let n=nt(e,e.doc),o=vr(e),i=yr(e),c=ot(e),a=Sr(e),s=Ar(e),l=Mr(e),d=kr(e,{win:r}),u=it(e,e.doc),h=wr(e,{win:r}),p=e.collectFonts?Tr(e):()=>{},f=Rr(e),I=[];for(let S of e.plugins)I.push(S.observer(S.callback,r,S.options));return()=>{se.forEach(S=>S.reset()),n.disconnect(),o(),i(),c(),a(),s(),l(),d(),u(),h(),p(),f(),I.forEach(S=>S())}}var ke=class{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,r,n,o){let i=n||this.getIdToRemoteIdMap(t),c=o||this.getRemoteIdToIdMap(t),a=i.get(r);return a||(a=this.generateIdFn(),i.set(r,a),c.set(a,r)),a}getIds(t,r){let n=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return r.map(i=>this.getId(t,i,n,o))}getRemoteId(t,r,n){let o=n||this.getRemoteIdToIdMap(t);if(typeof r!="number")return r;let i=o.get(r);return i||-1}getRemoteIds(t,r){let n=this.getRemoteIdToIdMap(t);return r.map(o=>this.getRemoteId(t,o,n))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let r=this.iframeIdToRemoteIdMap.get(t);return r||(r=new Map,this.iframeIdToRemoteIdMap.set(t,r)),r}getRemoteIdToIdMap(t){let r=this.iframeRemoteIdToIdMap.get(t);return r||(r=new Map,this.iframeRemoteIdToIdMap.set(t,r)),r}};var Be=class{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new ke(Qe),this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new ke(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,r){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:r}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(n=this.loadListener)===null||n===void 0||n.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){if(t.data.type==="rrweb"){if(!t.source)return;let n=this.crossOriginIframeMap.get(t.source);if(!n)return;let o=this.transformCrossOriginEvent(n,t.data.event);o&&this.wrappedEmit(o,t.data.isCheckout)}}transformCrossOriginEvent(t,r){var n;switch(r.type){case b.FullSnapshot:return this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(r.data.node,t),{timestamp:r.timestamp,type:b.IncrementalSnapshot,data:{source:y.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:r.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case b.Meta:case b.Load:case b.DomContentLoaded:return!1;case b.Plugin:return r;case b.Custom:return this.replaceIds(r.data.payload,t,["id","parentId","previousId","nextId"]),r;case b.IncrementalSnapshot:switch(r.data.source){case y.Mutation:return r.data.adds.forEach(o=>{this.replaceIds(o,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(o.node,t)}),r.data.removes.forEach(o=>{this.replaceIds(o,t,["parentId","id"])}),r.data.attributes.forEach(o=>{this.replaceIds(o,t,["id"])}),r.data.texts.forEach(o=>{this.replaceIds(o,t,["id"])}),r;case y.Drag:case y.TouchMove:case y.MouseMove:return r.data.positions.forEach(o=>{this.replaceIds(o,t,["id"])}),r;case y.ViewportResize:return!1;case y.MediaInteraction:case y.MouseInteraction:case y.Scroll:case y.CanvasMutation:case y.Input:return this.replaceIds(r.data,t,["id"]),r;case y.StyleSheetRule:case y.StyleDeclaration:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleId"]),r;case y.Font:return r;case y.Selection:return r.data.ranges.forEach(o=>{this.replaceIds(o,t,["start","end"])}),r;case y.AdoptedStyleSheet:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleIds"]),(n=r.data.styles)===null||n===void 0||n.forEach(o=>{this.replaceStyleIds(o,t,["styleId"])}),r}}}replace(t,r,n,o){for(let i of o)!Array.isArray(r[i])&&typeof r[i]!="number"||(Array.isArray(r[i])?r[i]=t.getIds(n,r[i]):r[i]=t.getId(n,r[i]));return r}replaceIds(t,r,n){return this.replace(this.crossOriginIframeMirror,t,r,n)}replaceStyleIds(t,r,n){return this.replace(this.crossOriginIframeStyleMirror,t,r,n)}replaceIdOnNode(t,r){this.replaceIds(t,r,["id"]),"childNodes"in t&&t.childNodes.forEach(n=>{this.replaceIdOnNode(n,r)})}};var Ge=class{constructor(t){this.shadowDoms=new WeakSet,this.restorePatches=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror;let r=this;this.restorePatches.push($(Element.prototype,"attachShadow",function(n){return function(o){let i=n.call(this,o);return this.shadowRoot&&r.addShadowRoot(this.shadowRoot,this.ownerDocument),i}}))}addShadowRoot(t,r){ce(t)&&(this.shadowDoms.has(t)||(this.shadowDoms.add(t),nt(Object.assign(Object.assign({},this.bypassOptions),{doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t),ot(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),setTimeout(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),it({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t)},0)))}observeAttachShadow(t){if(t.contentWindow){let r=this;this.restorePatches.push($(t.contentWindow.HTMLElement.prototype,"attachShadow",function(n){return function(o){let i=n.call(this,o);return this.shadowRoot&&r.addShadowRoot(this.shadowRoot,t.contentDocument),i}}))}}reset(){this.restorePatches.forEach(t=>t()),this.shadowDoms=new WeakSet}};function Ft(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Lt(e,t,r,n){function o(i){return i instanceof r?i:new r(function(c){c(i)})}return new(r||(r=Promise))(function(i,c){function a(d){try{l(n.next(d))}catch(u){c(u)}}function s(d){try{l(n.throw(d))}catch(u){c(u)}}function l(d){d.done?i(d.value):o(d.value).then(a,s)}l((n=n.apply(e,t||[])).next())})}var ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nr=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(we=0;we<ve.length;we++)Nr[ve.charCodeAt(we)]=we;var we,Dt=function(e){var t=new Uint8Array(e),r,n=t.length,o="";for(r=0;r<n;r+=3)o+=ve[t[r]>>2],o+=ve[(t[r]&3)<<4|t[r+1]>>4],o+=ve[(t[r+1]&15)<<2|t[r+2]>>6],o+=ve[t[r+2]&63];return n%3===2?o=o.substring(0,o.length-1)+"=":n%3===1&&(o=o.substring(0,o.length-2)+"=="),o};var Wt=new Map;function Or(e,t){let r=Wt.get(e);return r||(r=new Map,Wt.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}var at=(e,t,r)=>{if(!e||!(Bt(e,t)||typeof e=="object"))return;let n=e.constructor.name,o=Or(r,n),i=o.indexOf(e);return i===-1&&(i=o.length,o.push(e)),i};function Ue(e,t,r){if(e instanceof Array)return e.map(n=>Ue(n,t,r));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){let n=e.constructor.name,o=Dt(e);return{rr_type:n,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[Ue(e.buffer,t,r),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){let n=e.constructor.name,{src:o}=e;return{rr_type:n,src:o}}else if(e instanceof HTMLCanvasElement){let n="HTMLImageElement",o=e.toDataURL();return{rr_type:n,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[Ue(e.data,t,r),e.width,e.height]};if(Bt(e,t)||typeof e=="object"){let n=e.constructor.name,o=at(e,t,r);return{rr_type:n,index:o}}}}return e}var Ve=(e,t,r)=>[...e].map(n=>Ue(n,t,r)),Bt=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(o=>typeof t[o]=="function").find(o=>e instanceof t[o]);function Gt(e,t,r,n){let o=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(let c of i)try{if(typeof t.CanvasRenderingContext2D.prototype[c]!="function")continue;let a=$(t.CanvasRenderingContext2D.prototype,c,function(s){return function(...l){return R(this.canvas,r,n,!0)||setTimeout(()=>{let d=Ve([...l],t,this);e(this.canvas,{type:oe["2D"],property:c,args:d})},0),s.apply(this,l)}});o.push(a)}catch(a){let s=fe(t.CanvasRenderingContext2D.prototype,c,{set(l){e(this.canvas,{type:oe["2D"],property:c,args:[l],setter:!0})}});o.push(s)}return()=>{o.forEach(c=>c())}}function st(e,t,r){let n=[];try{let o=$(e.HTMLCanvasElement.prototype,"getContext",function(i){return function(c,...a){return R(this,t,r,!0)||"__context"in this||(this.__context=c),i.apply(this,[c,...a])}});n.push(o)}catch(o){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{n.forEach(o=>o())}}function Ut(e,t,r,n,o,i,c){let a=[],s=Object.getOwnPropertyNames(e);for(let l of s)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(l))try{if(typeof e[l]!="function")continue;let d=$(e,l,function(u){return function(...h){let p=u.apply(this,h);if(at(p,c,this),!R(this.canvas,n,o,!0)){let f=Ve([...h],c,this),I={type:t,property:l,args:f};r(this.canvas,I)}return p}});a.push(d)}catch(d){let u=fe(e,l,{set(h){r(this.canvas,{type:t,property:l,args:[h],setter:!0})}});a.push(u)}return a}function Vt(e,t,r,n,o){let i=[];return i.push(...Ut(t.WebGLRenderingContext.prototype,oe.WebGL,e,r,n,o,t)),typeof t.WebGL2RenderingContext!="undefined"&&i.push(...Ut(t.WebGL2RenderingContext.prototype,oe.WebGL2,e,r,n,o,t)),()=>{i.forEach(c=>c())}}var lt=null;try{Zt=typeof module!="undefined"&&typeof module.require=="function"&&module.require("worker_threads")||typeof __non_webpack_require__=="function"&&__non_webpack_require__("worker_threads")||typeof Pe=="function"&&Pe("worker_threads"),lt=Zt.Worker}catch(e){}var Zt;function Er(e,t){return Buffer.from(e,"base64").toString(t?"utf16":"utf8")}function _t(e,t,r){var n=t===void 0?null:t,o=r===void 0?!1:r,i=Er(e,o),c=i.indexOf(`
`,10)+1,a=i.substring(c)+(n?"//# sourceMappingURL="+n:"");return function(l){return new lt(a,Object.assign({},l,{eval:!0}))}}function Fr(e,t){var r=atob(e);if(t){for(var n=new Uint8Array(r.length),o=0,i=r.length;o<i;++o)n[o]=r.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return r}function Lr(e,t,r){var n=t===void 0?null:t,o=r===void 0?!1:r,i=Fr(e,o),c=i.indexOf(`
`,10)+1,a=i.substring(c)+(n?"//# sourceMappingURL="+n:""),s=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(s)}function Kt(e,t,r){var n;return function(i){return n=n||Lr(e,t,r),new Worker(n,i)}}var Dr=Object.prototype.toString.call(typeof process!="undefined"?process:0)==="[object process]";function zt(){return Dr}function Ht(e,t,r){return zt()?_t(e,t,r):Kt(e,t,r)}var Pt=Ht("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",null,!1);var Ze=class{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(s,l)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(s)||this.pendingCanvasMutations.set(s,[]),this.pendingCanvasMutations.get(s).push(l)};let{sampling:r="all",win:n,blockClass:o,blockSelector:i,recordCanvas:c,dataURLOptions:a}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,c&&r==="all"&&this.initCanvasMutationObserver(n,o,i),c&&typeof r=="number"&&this.initCanvasFPSObserver(r,n,o,i,{dataURLOptions:a})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(t,r,n,o,i){let c=st(r,n,o),a=new Map,s=new Pt;s.onmessage=f=>{let{id:I}=f.data;if(a.set(I,!1),!("base64"in f.data))return;let{base64:S,type:v,width:g,height:m}=f.data;this.mutationCb({id:I,type:oe["2D"],commands:[{property:"clearRect",args:[0,0,g,m]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:S}],type:v}]},0,0]}]})};let l=1e3/t,d=0,u,h=()=>{let f=[];return r.document.querySelectorAll("canvas").forEach(I=>{R(I,n,o,!0)||f.push(I)}),f},p=f=>{if(d&&f-d<l){u=requestAnimationFrame(p);return}d=f,h().forEach(I=>Lt(this,void 0,void 0,function*(){var S;let v=this.mirror.getId(I);if(a.get(v))return;if(a.set(v,!0),["webgl","webgl2"].includes(I.__context)){let m=I.getContext(I.__context);((S=m==null?void 0:m.getContextAttributes())===null||S===void 0?void 0:S.preserveDrawingBuffer)===!1&&(m==null||m.clear(m.COLOR_BUFFER_BIT))}let g=yield createImageBitmap(I);s.postMessage({id:v,bitmap:g,width:I.width,height:I.height,dataURLOptions:i.dataURLOptions},[g])})),u=requestAnimationFrame(p)};u=requestAnimationFrame(p),this.resetObservers=()=>{c(),cancelAnimationFrame(u)}}initCanvasMutationObserver(t,r,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();let o=st(t,r,n),i=Gt(this.processMutation.bind(this),t,r,n),c=Vt(this.processMutation.bind(this),t,r,n,this.mirror);this.resetObservers=()=>{o(),i(),c()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let t=r=>{this.rafStamps.latestId=r,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,r)=>{let n=this.mirror.getId(r);this.flushPendingCanvasMutationFor(r,n)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,r){if(this.frozen||this.locked)return;let n=this.pendingCanvasMutations.get(t);if(!n||r===-1)return;let o=n.map(c=>Ft(c,["type"])),{type:i}=n[0];this.mutationCb({id:r,type:i,commands:o}),this.pendingCanvasMutations.delete(t)}};var _e=class{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new Te,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,r){"_cssText"in r.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:r.id,attributes:r.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,r){if(t.length===0)return;let n={id:r,styleIds:[]},o=[];for(let i of t){let c;if(this.styleMirror.has(i))c=this.styleMirror.getId(i);else{c=this.styleMirror.add(i);let a=Array.from(i.rules||CSSRule);o.push({styleId:c,rules:a.map((s,l)=>({rule:Je(s),index:l}))})}n.styleIds.push(c)}o.length>0&&(n.styles=o),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}};function E(e){return Object.assign(Object.assign({},e),{timestamp:Date.now()})}var x,Ke,ct,ze=!1,ee=gt();function he(e={}){let{emit:t,checkoutEveryNms:r,checkoutEveryNth:n,blockClass:o="rr-block",blockSelector:i=null,ignoreClass:c="rr-ignore",maskTextClass:a="rr-mask",maskTextSelector:s=null,inlineStylesheet:l=!0,maskAllInputs:d,maskInputOptions:u,slimDOMOptions:h,maskInputFn:p,maskTextFn:f,hooks:I,packFn:S,sampling:v={},dataURLOptions:g={},mousemoveWait:m,recordCanvas:k=!1,recordCrossOriginIframes:B=!1,userTriggeredOnInput:L=!1,collectFonts:D=!1,inlineImages:w=!1,plugins:K,keepIframeSrcFn:z=()=>!1,ignoreCSSAttributes:J=new Set([])}=e,Q=B?window.parent===window:!0,j=!1;if(!Q)try{window.parent.document,j=!1}catch(C){j=!0}if(Q&&!t)throw new Error("emit function is required");m!==void 0&&v.mousemove===void 0&&(v.mousemove=m),ee.reset();let O=d===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:u!==void 0?u:{password:!0},H=h===!0||h==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:h==="all",headMetaDescKeywords:h==="all"}:h||{};vt();let q,te=0,ne=C=>{for(let G of K||[])G.eventProcessor&&(C=G.eventProcessor(C));return S&&(C=S(C)),C};x=(C,G)=>{var Z;if(!((Z=se[0])===null||Z===void 0)&&Z.isFrozen()&&C.type!==b.FullSnapshot&&!(C.type===b.IncrementalSnapshot&&C.data.source===y.Mutation)&&se.forEach(T=>T.unfreeze()),Q)t==null||t(ne(C),G);else if(j){let T={type:"rrweb",event:ne(C),isCheckout:G};window.parent.postMessage(T,"*")}if(C.type===b.FullSnapshot)q=C,te=0;else if(C.type===b.IncrementalSnapshot){if(C.data.source===y.Mutation&&C.data.isAttachIframe)return;te++;let T=n&&te>=n,Y=r&&C.timestamp-q.timestamp>r;(T||Y)&&Ke(!0)}};let V=C=>{x(E({type:b.IncrementalSnapshot,data:Object.assign({source:y.Mutation},C)}))},P=C=>x(E({type:b.IncrementalSnapshot,data:Object.assign({source:y.Scroll},C)})),ie=C=>x(E({type:b.IncrementalSnapshot,data:Object.assign({source:y.CanvasMutation},C)})),N=C=>x(E({type:b.IncrementalSnapshot,data:Object.assign({source:y.AdoptedStyleSheet},C)})),X=new _e({mutationCb:V,adoptedStyleSheetCb:N}),re=new Be({mirror:ee,mutationCb:V,stylesheetManager:X,recordCrossOriginIframes:B,wrappedEmit:x});for(let C of K||[])C.getMirror&&C.getMirror({nodeMirror:ee,crossOriginIframeMirror:re.crossOriginIframeMirror,crossOriginIframeStyleMirror:re.crossOriginIframeStyleMirror});ct=new Ze({recordCanvas:k,mutationCb:ie,win:window,blockClass:o,blockSelector:i,mirror:ee,sampling:v.canvas,dataURLOptions:g});let pe=new Ge({mutationCb:V,scrollCb:P,bypassOptions:{blockClass:o,blockSelector:i,maskTextClass:a,maskTextSelector:s,inlineStylesheet:l,maskInputOptions:O,dataURLOptions:g,maskTextFn:f,maskInputFn:p,recordCanvas:k,inlineImages:w,sampling:v,slimDOMOptions:H,iframeManager:re,stylesheetManager:X,canvasManager:ct,keepIframeSrcFn:z},mirror:ee});Ke=(C=!1)=>{var G,Z,T,Y,A,_;x(E({type:b.Meta,data:{href:window.location.href,width:xe(),height:Re()}}),C),X.reset(),se.forEach(U=>U.lock());let ye=mt(document,{mirror:ee,blockClass:o,blockSelector:i,maskTextClass:a,maskTextSelector:s,inlineStylesheet:l,maskAllInputs:O,maskTextFn:f,slimDOM:H,dataURLOptions:g,recordCanvas:k,inlineImages:w,onSerialize:U=>{Oe(U,ee)&&re.addIframe(U),Ee(U,ee)&&X.trackLinkElement(U),Fe(U)&&pe.addShadowRoot(U.shadowRoot,document)},onIframeLoad:(U,He)=>{re.attachIframe(U,He),pe.observeAttachShadow(U)},onStylesheetLoad:(U,He)=>{X.attachLinkElement(U,He)},keepIframeSrcFn:z});if(!ye)return console.warn("Failed to snapshot the document");x(E({type:b.FullSnapshot,data:{node:ye,initialOffset:{left:window.pageXOffset!==void 0?window.pageXOffset:(document==null?void 0:document.documentElement.scrollLeft)||((Z=(G=document==null?void 0:document.body)===null||G===void 0?void 0:G.parentElement)===null||Z===void 0?void 0:Z.scrollLeft)||((T=document==null?void 0:document.body)===null||T===void 0?void 0:T.scrollLeft)||0,top:window.pageYOffset!==void 0?window.pageYOffset:(document==null?void 0:document.documentElement.scrollTop)||((A=(Y=document==null?void 0:document.body)===null||Y===void 0?void 0:Y.parentElement)===null||A===void 0?void 0:A.scrollTop)||((_=document==null?void 0:document.body)===null||_===void 0?void 0:_.scrollTop)||0}}})),se.forEach(U=>U.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&X.adoptStyleSheets(document.adoptedStyleSheets,ee.getId(document))};try{let C=[];C.push(W("DOMContentLoaded",()=>{x(E({type:b.DomContentLoaded,data:{}}))}));let G=T=>{var Y;return Et({mutationCb:V,mousemoveCb:(A,_)=>x(E({type:b.IncrementalSnapshot,data:{source:_,positions:A}})),mouseInteractionCb:A=>x(E({type:b.IncrementalSnapshot,data:Object.assign({source:y.MouseInteraction},A)})),scrollCb:P,viewportResizeCb:A=>x(E({type:b.IncrementalSnapshot,data:Object.assign({source:y.ViewportResize},A)})),inputCb:A=>x(E({type:b.IncrementalSnapshot,data:Object.assign({source:y.Input},A)})),mediaInteractionCb:A=>x(E({type:b.IncrementalSnapshot,data:Object.assign({source:y.MediaInteraction},A)})),styleSheetRuleCb:A=>x(E({type:b.IncrementalSnapshot,data:Object.assign({source:y.StyleSheetRule},A)})),styleDeclarationCb:A=>x(E({type:b.IncrementalSnapshot,data:Object.assign({source:y.StyleDeclaration},A)})),canvasMutationCb:ie,fontCb:A=>x(E({type:b.IncrementalSnapshot,data:Object.assign({source:y.Font},A)})),selectionCb:A=>{x(E({type:b.IncrementalSnapshot,data:Object.assign({source:y.Selection},A)}))},blockClass:o,ignoreClass:c,maskTextClass:a,maskTextSelector:s,maskInputOptions:O,inlineStylesheet:l,sampling:v,recordCanvas:k,inlineImages:w,userTriggeredOnInput:L,collectFonts:D,doc:T,maskInputFn:p,maskTextFn:f,keepIframeSrcFn:z,blockSelector:i,slimDOMOptions:H,dataURLOptions:g,mirror:ee,iframeManager:re,stylesheetManager:X,shadowDomManager:pe,canvasManager:ct,ignoreCSSAttributes:J,plugins:((Y=K==null?void 0:K.filter(A=>A.observer))===null||Y===void 0?void 0:Y.map(A=>({observer:A.observer,options:A.options,callback:_=>x(E({type:b.Plugin,data:{plugin:A.name,payload:_}}))})))||[]},I)};re.addLoadListener(T=>{C.push(G(T.contentDocument))});let Z=()=>{Ke(),C.push(G(document)),ze=!0};return document.readyState==="interactive"||document.readyState==="complete"?Z():C.push(W("load",()=>{x(E({type:b.Load,data:{}})),Z()},window)),()=>{C.forEach(T=>T()),ze=!1}}catch(C){console.warn(C)}}he.addCustomEvent=(e,t)=>{if(!ze)throw new Error("please add custom event after start recording");x(E({type:b.Custom,data:{tag:e,payload:t}}))};he.freezePage=()=>{se.forEach(e=>e.freeze())};he.takeFullSnapshot=e=>{if(!ze)throw new Error("please take full snapshot after start recording");Ke(e)};he.mirror=ee;var dt=class{constructor(t){this.events=[];this.stopRecording=null;this.batchInterval=null;this.isUnloading=!1;this.projectId=t.projectId,this.apiUrl=t.apiUrl||"",this.sessionId=this.generateSessionId(),this.init()}generateSessionId(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let r=Math.random()*16|0;return(t==="x"?r:r&3|8).toString(16)})}init(){try{console.log("Reev tracker initializing...",{projectId:this.projectId,apiUrl:this.apiUrl,sessionId:this.sessionId}),this.startRecording(),console.log("Reev tracker recording started"),this.setupBatchSending(),console.log("Reev tracker batch sending setup complete"),this.setupUnloadHandler(),console.log("Reev tracker initialized successfully")}catch(t){console.error("Reev tracker initialization failed:",t)}}startRecording(){this.stopRecording=he({emit:t=>{this.isUnloading||(this.events.push(t),this.events.length===1&&console.log("Reev tracker: First event recorded",t.type))},maskAllInputs:!0,maskAllText:!1,blockClass:"rr-block",ignoreClass:"rr-ignore"})}setupBatchSending(){this.batchInterval=setInterval(()=>{this.sendBatch()},1e4)}setupUnloadHandler(){let t=()=>{this.isUnloading=!0,this.batchInterval&&clearInterval(this.batchInterval),this.sendBatch(!0)};window.addEventListener("beforeunload",t),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&t()})}sendBatch(t=!1){return ut(this,null,function*(){if(this.events.length===0)return;let r=[...this.events];this.events=[];try{let n=`${this.apiUrl}/api/events`;console.log("Sending batch to:",n,"Events:",r.length);let o=yield fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:this.sessionId,projectId:this.projectId,events:r}),keepalive:t});console.log("Response status:",o.status,o.statusText),!o.ok&&!t?(console.warn("Failed to send batch, requeuing events"),this.events.unshift(...r)):console.log("Batch sent successfully")}catch(n){console.error("Error sending batch:",n),t||this.events.unshift(...r)}})}stop(){this.stopRecording&&(this.stopRecording(),this.stopRecording=null),this.batchInterval&&(clearInterval(this.batchInterval),this.batchInterval=null)}};function Yt(){console.log("Reev tracker: initTracker called");let e=document.currentScript;if(!e){let n=document.querySelectorAll("script[data-project-id]");n.length>0&&(e=n[n.length-1],console.log("Reev tracker: Found script element via querySelector"))}if(!e){console.error("Reev tracker: Could not find script element");return}let t=e.getAttribute("data-project-id");if(!t){console.error("Reev: data-project-id attribute is required");return}let r=e.getAttribute("data-api-url")||"";console.log("Reev tracker: Creating tracker with",{projectId:t,apiUrl:r}),new dt({projectId:t,apiUrl:r})}typeof window!="undefined"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Yt):Yt());})();
/*! Bundled license information:

rrweb/es/rrweb/ext/tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
